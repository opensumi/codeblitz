(()=>{"use strict";var e={708:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getVsCodeApiScript=t.defaultCss=void 0,t.defaultCss="body {\n  background-color: var(--vscode-editor-background);\n  color: var(--vscode-editor-foreground);\n  font-family: var(--vscode-font-family);\n  font-weight: var(--vscode-font-weight);\n  font-size: var(--vscode-font-size);\n  margin: 0;\n  padding: 0 20px;\n}\n\nimg {\n  max-width: 100%;\n  max-height: 100%;\n}\n\na {\n  color: var(--vscode-textLink-foreground);\n}\n\na:hover {\n  color: var(--vscode-textLink-activeForeground);\n}\n\na:focus,\ninput:focus,\nselect:focus,\ntextarea:focus {\n  outline: 1px solid -webkit-focus-ring-color;\n  outline-offset: -1px;\n}\n\ncode {\n  color: var(--vscode-textPreformat-foreground);\n}\n\nblockquote {\n  background: var(--vscode-textBlockQuote-background);\n  border-color: var(--vscode-textBlockQuote-border);\n}\n\n::-webkit-scrollbar {\n  width: 10px;\n  height: 10px;\n}\n\n::-webkit-scrollbar-thumb {\n  background-color: var(--vscode-scrollbarSlider-background);\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: var(--vscode-scrollbarSlider-hoverBackground);\n}\n::-webkit-scrollbar-thumb:active {\n  background-color: var(--vscode-scrollbarSlider-activeBackground);\n}\n::-webkit-scrollbar-corner {\n  background: transparent;\n}",t.getVsCodeApiScript=function(e){return`\n    const acquireVsCodeApi = (function() {\n      const originalPostMessage = window.parent.postMessage.bind(window.parent);\n      const targetOrigin = '*';\n      let acquired = false;\n\n      let state = ${e?`JSON.parse("${t=JSON.stringify(e),(t+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}")`:void 0};\n\n      return () => {\n        if (acquired) {\n          throw new Error('An instance of the VS Code API has already been acquired');\n        }\n        acquired = true;\n        return Object.freeze({\n          postMessage: function(msg) {\n            return originalPostMessage({ command: 'onmessage', data: msg }, targetOrigin);\n          },\n          setState: function(newState) {\n            state = newState;\n            originalPostMessage({ command: 'do-update-state', data: JSON.parse(JSON.stringify(newState)) }, targetOrigin);\n            return newState;\n          },\n          getState: function() {\n            return state;\n          }\n        });\n      };\n    })();\n    delete window.parent;\n    delete window.top;\n    delete window.frameElement;\n    window.acquireVsCodeApi = acquireVsCodeApi;\n  `;var t}},362:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewPanelManager=void 0;const o=n(708);t.WebviewPanelManager=class{constructor(e){this.channel=e,this.activeTheme="default",this.isHandlingScroll=!1,this.updateId=0,this.firstLoad=!0,this.pendingMessages=[],document.addEventListener("DOMContentLoaded",this.init.bind(this))}init(){const e=document.location.search.match(/\bid=([\w-]+)/);this.ID=e?e[1]:void 0,document.body&&(this.channel.onMessage("styles",((e,t)=>{this.styles=t.styles,this.activeTheme=t.activeTheme;const n=this.getActiveFrame();n&&n.contentDocument&&this.applyStyles(n.contentDocument,n.contentDocument.body)})),this.channel.onMessage("focus",(()=>{const e=this.getActiveFrame();e&&e.contentWindow&&e.contentWindow.focus()})),this.channel.onMessage("content",(async(e,t)=>this.setContent(t))),this.channel.onMessage("message",((e,t)=>{var n;if(!this.getPendingFrame()){const e=this.getActiveFrame();if(e)return void(null===(n=e.contentWindow)||void 0===n||n.postMessage(t,"*"))}this.pendingMessages.push(t)})),this.trackFocus({onFocus:()=>this.channel.postMessage("did-focus"),onBlur:()=>this.channel.postMessage("did-blur")}),this.channel.postMessage("webview-ready",{}))}async setContent(e){var t,n,o,s,i,a;const r=++this.updateId;if(await this.channel.ready,r!==this.updateId)return;const d=e.options,c=this.toContentHtml(e),l=this.getActiveFrame(),h=this.firstLoad;let u;if(this.firstLoad)this.firstLoad=!1,u=(e,t)=>{isNaN(this.initialScrollProgress)||0===t.scrollY&&t.scroll(0,e.clientHeight*this.initialScrollProgress)};else{const e=l&&l.contentDocument&&l.contentDocument.body?null===(t=l.contentWindow)||void 0===t?void 0:t.scrollY:0;u=(t,n)=>{0===n.scrollY&&n.scroll(0,e)}}const g=this.getPendingFrame();g&&(g.setAttribute("id",""),document.body.removeChild(g)),h||(this.pendingMessages=[]);const m=document.createElement("iframe");m.setAttribute("id","pending-frame"),m.setAttribute("frameborder","0"),m.setAttribute("allow","autoplay; clipboard-read; clipboard-write;");const v=new Set(["allow-same-origin","allow-pointer-lock"]);d.allowScripts&&(v.add("allow-scripts"),v.add("allow-downloads")),d.allowForms&&v.add("allow-forms"),m.setAttribute("sandbox",Array.from(v).join(" ")),this.channel.fakeLoad&&(m.src=`./fake.html?id=${this.ID}`),m.style.cssText="display: block; margin: 0; overflow: hidden; position: absolute; width: 100%; height: 100%; visibility: hidden",document.body.appendChild(m),this.channel.fakeLoad||null===(n=m.contentDocument)||void 0===n||n.open(),null===(o=m.contentWindow)||void 0===o||o.addEventListener("keydown",this.handleInnerKeydown.bind(this)),null===(s=m.contentWindow)||void 0===s||s.addEventListener("DOMContentLoaded",(e=>{var t,n,o;this.channel.fakeLoad&&(null===(t=m.contentDocument)||void 0===t||t.open(),null===(n=m.contentDocument)||void 0===n||n.write(c),null===(o=m.contentDocument)||void 0===o||o.close(),p(m));const s=e.target?e.target:void 0;s&&this.applyStyles(s,s.body)}));const f=(e,t)=>{var n;e&&e.body&&u(e.body,t);const o=this.getPendingFrame();if(o&&o.contentDocument&&o.contentDocument===e){const e=this.getActiveFrame();e&&document.body.removeChild(e),this.applyStyles(o.contentDocument,o.contentDocument.body),o.setAttribute("id","active-frame"),o.style.visibility="visible",this.channel.focusIframeOnCreate&&(null===(n=o.contentWindow)||void 0===n||n.focus()),t.addEventListener("scroll",this.handleInnerScroll.bind(this)),this.pendingMessages.forEach((e=>{t.postMessage(e,"*")})),this.pendingMessages=[]}},p=e=>{clearTimeout(this.loadTimeout),this.loadTimeout=void 0,this.loadTimeout=setTimeout((()=>{clearTimeout(this.loadTimeout),this.loadTimeout=void 0,f(e.contentDocument,e.contentWindow)}),1e3);const t=this;e.contentWindow.addEventListener("load",(function(e){t.loadTimeout&&(clearTimeout(t.loadTimeout),t.loadTimeout=void 0,f(e.target,this))})),e.contentWindow.addEventListener("click",this.handleInnerClick.bind(this)),this.channel.onIframeLoaded&&this.channel.onIframeLoaded(e)};this.channel.fakeLoad||p(m),this.channel.fakeLoad||(null===(i=m.contentDocument)||void 0===i||i.write(c),null===(a=m.contentDocument)||void 0===a||a.close()),this.channel.postMessage("did-set-content",void 0)}trackFocus({onFocus:e,onBlur:t}){let n=document.hasFocus();setInterval((()=>{const o=document.hasFocus();o!==n&&(n=o,o?e():t())}),50)}getActiveFrame(){return document.getElementById("active-frame")}getPendingFrame(){return document.getElementById("pending-frame")}get defaultCssRules(){return o.defaultCss}applyStyles(e,t){if(e&&(t&&(t.classList.remove("vscode-light","vscode-dark","vscode-high-contrast"),t.classList.add(this.activeTheme)),this.styles))for(const t of Object.keys(this.styles))e.documentElement.style.setProperty(`--${t}`,this.styles[t])}handleInnerClick(e){if(!e||!e.view||!e.view.document)return;const t=e.view.document.getElementsByTagName("base")[0];let n=e.target;for(;n;){if(n.tagName&&"a"===n.tagName.toLowerCase()&&n.href){if("#"===n.getAttribute("href"))e.view.scrollTo(0,0);else if(n.hash&&(n.getAttribute("href")===n.hash||t&&n.href.indexOf(t.href)>=0)){const t=e.view.document.getElementById(n.hash.substr(1,n.hash.length-1));t&&t.scrollIntoView()}else this.channel.postMessage("did-click-link",n.href.baseVal||n.href);e.preventDefault();break}n=n.parentNode}}handleInnerKeydown(e){this.channel.postMessage("did-keydown",{key:e.key,keyCode:e.keyCode,code:e.code,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,repeat:e.repeat}),this.channel.onKeydown&&this.channel.onKeydown(e)}handleInnerScroll(e){if(!e.target||!e.target.body)return;if(this.isHandlingScroll)return;const t=e.currentTarget.scrollY/e.target.body.clientHeight;isNaN(t)||(this.isHandlingScroll=!0,window.requestAnimationFrame((()=>{try{this.channel.postMessage("did-scroll",t)}catch(e){}this.isHandlingScroll=!1})))}toContentHtml(e){const t=e.options,n=e.contents,s=(new DOMParser).parseFromString(n,"text/html");if(s.querySelectorAll("a").forEach((e=>{e.title||(e.title=e.getAttribute("href"))})),t.allowScripts){const t=s.createElement("script");t.textContent=(0,o.getVsCodeApiScript)(e.state),s.head.prepend(t)}const i=s.createElement("style");return i.id="_defaultStyles",i.innerHTML=this.defaultCssRules,s.head.prepend(i),this.applyStyles(s,s.body),"<!DOCTYPE html>\n"+s.documentElement.outerHTML}}}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}(()=>{const e=n(362);new e.WebviewPanelManager(new class{constructor(){this.handlers=new Map,this.fakeLoad=!1,this.isInDevelopmentMode=!1,this.id=document.location.search.match(/\bid=([\w-]+)/)[1],window.addEventListener("message",(e=>{if(e.data&&("onmessage"===e.data.command||"do-update-state"===e.data.command))return void this.postMessage(e.data.command,e.data.data);const t=e.data.channel,n=this.handlers.get(t);n?n(e,e.data.data):console.log("no handler for ",e)})),this.ready=new Promise((async e=>{e()})),this.onMessage("devtools-opened",(()=>{this.isInDevelopmentMode=!0}))}get inDev(){return this.isInDevelopmentMode}postMessage(e,t){window.parent!==window&&window.parent.postMessage({target:this.id,channel:e,data:t},"*")}onMessage(e,t){this.handlers.set(e,t)}onIframeLoaded(e){}onKeydown(e){"s"===e.key&&(e.metaKey||e.ctrlKey)&&e.preventDefault()}})})()})();